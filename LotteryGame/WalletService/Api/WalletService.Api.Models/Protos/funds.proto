syntax = "proto3";

import "google/protobuf/timestamp.proto";

option csharp_namespace = "WalletService.Api.Models.Protos.Funds";

package funds;

service Funds {
	rpc HasEnoughFunds (EnoughFundsProtoRequest) returns (BaseProtoResponse);
	rpc Reserve (ReserveProtoRequest) returns (ReserveProtoResponse);
	rpc Capture (FundsProtoRequest) returns (BaseProtoResponse);
	rpc Refund (FundsProtoRequest) returns (BaseProtoResponse);
	rpc GetHistory(HistoryProtoRequest) returns (HistoryProtoResponseList);
}

message EnoughFundsProtoRequest {
	int32 playerId = 1;
	int64 cost = 2;
}

message BaseProtoResponse {
	bool success = 1;
	string errorMsg = 2;
}

message ReserveProtoRequest {
	int32 playerId = 1;
	int64 amount = 2;
}

message ReserveProtoResponse {
	bool success = 1;
	string errorMsg = 2;
	int32 reservationId = 3;
}

message FundsProtoRequest {
	int32 reservationId = 1;
}

message HistoryProtoRequest {
	int32 playerId = 1;
}

enum BalanceTypeProto {
    RESERVE = 0;
    CAPTURE = 1;
    REFUND = 2;
    REAL_MONEY_PRIZE = 3;
    BONUS_MONEY_PRIZE = 4;
    LOYALTY_POINTS_PRIZE = 5;
}

message HistoryProtoResponse {
	int64 amount = 1;
	google.protobuf.Timestamp createdOn = 2;
	int64 oldBalance = 3;
	int64 newBalance = 4;
	BalanceTypeProto type = 5;
    string reason = 6;
	bool isConfirmed = 7;
}

message HistoryProtoResponseList {
    repeated HistoryProtoResponse items = 1;
}